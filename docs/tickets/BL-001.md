# Ticket BL-001: Initialize Monorepo with Frontend (Vite + React + TS) and Backend (Django + DRF + Channels)

## Description
Set up the initial repository structure and tooling to support a React + TypeScript SPA and a Django API with WebSocket streaming. This establishes the baseline developer experience, strict typing, linting/formatting, and the ability to run both servers locally. The structure and choices should align with the technical specification and conventions:

- Frontend: Vite, React 18, TypeScript (strict), Tailwind CSS, ESLint, Prettier, Vitest.
- Backend: Django 5, Django REST Framework, Django Channels (ASGI), DRF Spectacular (OpenAPI), pytest, ruff, black, mypy (strict).
- Makefile workflows already exist; ensure new scaffolding integrates with `fe-*`, `schema`, `run`, `test`, and `check`.
- Communication baseline:
  - REST base path: `/api/v1/`
  - WebSocket namespace base: `/ws/`
- Provide minimal “hello world” endpoints to validate stack wiring:
  - Frontend: root route renders an app shell.
  - Backend: `GET /api/v1/health/` returns JSON `{ "status": "ok" }`.
  - WebSocket: `/ws/echo/` ASGI consumer that echoes back messages to validate Channels.

This ticket does not implement domain models or business logic; it only prepares the project layout, DX, and smoke endpoints so later tickets (models, autosave, suggestions, etc.) can build on it.

## Acceptance Criteria
- Repository structure:
  - `frontend/` created with Vite + React + TypeScript scaffold and Tailwind configured.
  - `backend/` created as a Django project with ASGI (`asgi.py`) and Channels configured.
  - `docs/` retains existing docs; new files do not conflict with current Makefile.
- Frontend (Vite + React + TS):
  - `package.json` includes scripts: `dev`, `build`, `preview`, `lint`, `test`, `typecheck`.
  - `tsconfig.json` enables strict type checking (noImplicitAny, strict true).
  - Tailwind configured with `tailwind.config.ts`, `postcss.config.cjs`, base styles wired.
  - App shell renders on `http://localhost:5173/` with a simple header “liriac”.
  - ESLint + Prettier set up; `pnpm lint` runs clean on scaffold.
  - Vitest configured; a basic component test passes with `pnpm test`.
- Backend (Django + DRF + Channels):
  - Django project created (`backend/manage.py`, `backend/liriac/` module).
  - Settings include DRF, Channels, Spectacular; split or modularized as per spec (single-file acceptable for MVP if clear).
  - ASGI entrypoint uses Channels; routing configured for HTTP and WebSocket.
  - `GET /api/v1/health/` view returns `{ "status": "ok" }` (DRF or Django JSONResponse).
  - WebSocket route `/ws/echo/` echoes text frames (or JSON) to validate Channels plumbing.
  - DRF Spectacular basic schema generation works; `make schema` produces `backend/schema.yaml`.
  - `make run` starts the server without errors; health endpoint responds 200.
- Integration with Makefile:
  - `make fe-dev` runs Vite dev server.
  - `make fe-build` succeeds.
  - `make fe-test` runs Vitest and passes.
  - `make fe-lint` and `make fe-typecheck` run successfully.
  - `make run` starts Django dev server (ASGI/Channels active).
  - `make schema` writes `backend/schema.yaml` without errors.
- Typing, linting, and tests:
  - Frontend: `pnpm typecheck` succeeds (noEmit).
  - Backend: `uv run mypy --strict` succeeds on project scaffold.
  - Backend: `uv run pytest` passes with a smoke test for the health endpoint and echo consumer.
  - Code formatters (Prettier, black) and linters (ESLint, ruff) run clean on the scaffolded code.
- Documentation:
  - A short README snippet or comment in each app root explains how to run dev servers and smoke-test endpoints.
  - No changes required to existing docs; scaffolding matches `docs/01-technical-spec-en.md` and `docs/03-conventions.md`.

## Testing Strategy
- Frontend:
  - Add a Vitest test for the root App component that asserts the “liriac” header renders.
  - Run `pnpm test` in CI and locally; ensure zero failing tests.
  - Optionally add a trivial utility function test to confirm TS/Vitest config is correct.
- Backend:
  - Pytest: add a test for `GET /api/v1/health/` that asserts status 200 and payload `{"status":"ok"}`.
  - Channels test: use `channels.testing.WebsocketCommunicator` to connect to `/ws/echo/`, send a message, and assert the same payload is received.
  - DRF Spectacular: invoke management command in a test or CI step to ensure schema generation succeeds (no assertion on content yet).
- Tooling and gates:
  - Verify `make check` runs lint, typecheck, and tests across both frontend and backend successfully.
  - Ensure `ruff`, `black`, `mypy --strict`, `ESLint`, `Prettier`, `tsc --noEmit`, and Vitest all pass on the scaffold.
